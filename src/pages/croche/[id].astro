---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';
import WhatsAppButton from '../../components/WhatsAppButton.astro';
import Image from '../../components/Image.astro';

// Obter o par√¢metro id da URL
const { id } = Astro.params;

// Dados dos produtos de croch√™
const crocheProducts = [
  {
    id: 'bolsa-croche-pequena',
    title: 'Bolsa de Croch√™ Pequena',
    description: 'Bolsa de croch√™ pequena feita √† m√£o com linha de alta qualidade.',
    longDescription: 'Nossa bolsa de croch√™ pequena √© perfeita para ocasi√µes especiais ou uso di√°rio. Feita √† m√£o com linhas de alta qualidade, cada pe√ßa √© √∫nica e possui acabamento impec√°vel. O tamanho compacto √© ideal para carregar seus itens essenciais como celular, carteira e chaves. Dispon√≠vel em diversas cores, esta bolsa adiciona um toque artesanal e elegante ao seu visual. Por ser um produto artesanal, pequenas varia√ß√µes de tamanho e acabamento podem ocorrer, tornando sua bolsa verdadeiramente √∫nica.',
    price: 89.90,
    imageUrl: '/images/bolsa-croche.svg', // Placeholder SVG
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '20cm x 15cm x 5cm (aproximadamente)' },
      { name: 'Material', value: 'Linha de algod√£o mercerizado' },
      { name: 'Cores Dispon√≠veis', value: 'Bege, Preto, Azul Marinho, Rosa, Verde Oliva' },
      { name: 'Forro', value: 'Tecido 100% algod√£o' },
      { name: 'Al√ßa', value: 'Al√ßa de m√£o em croch√™' },
      { name: 'Fechamento', value: 'Bot√£o magn√©tico' },
      { name: 'Prazo de Produ√ß√£o', value: '7 dias √∫teis' }
    ],
    images: [
      '/images/bolsa-croche.svg',
      '/images/bolsa-croche.svg',
      '/images/bolsa-croche.svg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria e sab√£o neutro. N√£o torcer. Secar √† sombra em superf√≠cie plana.'
  },
  {
    id: 'bolsa-croche-media',
    title: 'Bolsa de Croch√™ M√©dia',
    description: 'Bolsa de croch√™ de tamanho m√©dio, ideal para uso di√°rio.',
    longDescription: 'Nossa bolsa de croch√™ m√©dia √© vers√°til e funcional, perfeita para o dia a dia. Confeccionada artesanalmente com linhas de alta qualidade, oferece espa√ßo suficiente para seus itens pessoais como celular, carteira, chaves, maquiagem e outros pequenos objetos. O design elegante combina com diversos estilos e ocasi√µes, desde um dia casual at√© um evento mais sofisticado. Dispon√≠vel em v√°rias cores, esta bolsa √© um acess√≥rio pr√°tico que adiciona um toque artesanal ao seu visual. Cada pe√ßa √© feita √† m√£o, o que pode resultar em pequenas varia√ß√µes que tornam sua bolsa √∫nica.',
    price: 129.90,
    imageUrl: '/images/bolsa-croche.svg', // Placeholder SVG
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '30cm x 20cm x 8cm (aproximadamente)' },
      { name: 'Material', value: 'Linha de algod√£o mercerizado' },
      { name: 'Cores Dispon√≠veis', value: 'Bege, Preto, Azul Marinho, Rosa, Verde Oliva, Terracota' },
      { name: 'Forro', value: 'Tecido 100% algod√£o com bolso interno' },
      { name: 'Al√ßa', value: 'Al√ßa de ombro ajust√°vel em croch√™' },
      { name: 'Fechamento', value: 'Z√≠per' },
      { name: 'Prazo de Produ√ß√£o', value: '10 dias √∫teis' }
    ],
    images: [
      '/images/bolsa-croche-media-1.jpg',
      '/images/bolsa-croche-media-2.jpg',
      '/images/bolsa-croche-media-3.jpg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria e sab√£o neutro. N√£o torcer. Secar √† sombra em superf√≠cie plana.'
  },
  {
    id: 'bolsa-croche-grande',
    title: 'Bolsa de Croch√™ Grande',
    description: 'Bolsa de croch√™ grande com espa√ßo para todos os seus itens essenciais.',
    longDescription: 'Nossa bolsa de croch√™ grande √© espa√ßosa e funcional, perfeita para quem precisa carregar muitos itens no dia a dia. Confeccionada artesanalmente com linhas resistentes de alta qualidade, esta bolsa oferece amplo espa√ßo interno para acomodar livros, notebook pequeno, necessaire, carteira, celular e outros objetos pessoais. O design elegante e atemporal se adapta a diversos estilos, enquanto o acabamento cuidadoso garante durabilidade e beleza. Dispon√≠vel em cores neutras que combinam com qualquer look, esta bolsa √© um acess√≥rio vers√°til que une funcionalidade e estilo artesanal. Por ser feita √† m√£o, cada pe√ßa possui caracter√≠sticas √∫nicas que a tornam especial.',
    price: 169.90,
    imageUrl: '/images/bolsa-croche-grande.jpg', // Placeholder
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '40cm x 30cm x 12cm (aproximadamente)' },
      { name: 'Material', value: 'Linha de algod√£o mercerizado refor√ßada' },
      { name: 'Cores Dispon√≠veis', value: 'Bege, Preto, Azul Marinho, Cinza' },
      { name: 'Forro', value: 'Tecido 100% algod√£o com m√∫ltiplos bolsos internos' },
      { name: 'Al√ßa', value: 'Al√ßas de ombro refor√ßadas em croch√™' },
      { name: 'Fechamento', value: 'Z√≠per e bot√£o magn√©tico' },
      { name: 'Prazo de Produ√ß√£o', value: '15 dias √∫teis' }
    ],
    images: [
      '/images/bolsa-croche-grande-1.jpg',
      '/images/bolsa-croche-grande-2.jpg',
      '/images/bolsa-croche-grande-3.jpg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria e sab√£o neutro. N√£o torcer. Secar √† sombra em superf√≠cie plana. Evitar sobrecarga para manter a forma da bolsa.'
  },
  {
    id: 'bolsa-praia-croche',
    title: 'Bolsa de Praia em Croch√™',
    description: 'Bolsa de praia espa√ßosa feita em croch√™ com materiais resistentes √† √°gua.',
    longDescription: 'Nossa bolsa de praia em croch√™ √© o acess√≥rio perfeito para dias de sol e mar. Espa√ßosa e estilosa, foi desenvolvida especialmente para uso na praia ou piscina, com materiais resistentes √† umidade e de secagem r√°pida. Comporta toalhas, protetor solar, livros, garrafas de √°gua e todos os seus itens essenciais para um dia de lazer. O design exclusivo com padr√µes geom√©tricos e cores vibrantes adiciona um toque de estilo ao seu visual praiano. A al√ßa confort√°vel permite carregar facilmente, mesmo quando a bolsa est√° cheia. Uma combina√ß√£o perfeita de funcionalidade, durabilidade e beleza artesanal para acompanhar seus momentos de divers√£o ao ar livre.',
    price: 149.90,
    imageUrl: '/images/bolsa-praia-croche.jpg', // Placeholder
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '45cm x 35cm x 15cm (aproximadamente)' },
      { name: 'Material', value: 'Fio de polipropileno resistente √† √°gua' },
      { name: 'Cores Dispon√≠veis', value: 'Azul Turquesa, Coral, Amarelo, Listrado Multicolorido' },
      { name: 'Forro', value: 'Tecido imperme√°vel com bolso interno com z√≠per' },
      { name: 'Al√ßa', value: 'Al√ßas de ombro refor√ßadas em corda n√°utica' },
      { name: 'Fechamento', value: 'Bot√£o de madeira' },
      { name: 'Prazo de Produ√ß√£o', value: '10 dias √∫teis' }
    ],
    images: [
      '/images/bolsa-praia-croche-1.jpg',
      '/images/bolsa-praia-croche-2.jpg',
      '/images/bolsa-praia-croche-3.jpg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria. N√£o usar alvejante. Secar √† sombra. Remover areia sacudindo gentilmente ap√≥s o uso.'
  },
  {
    id: 'necessaire-croche',
    title: 'Necessaire em Croch√™',
    description: 'Necessaire delicada feita em croch√™ para guardar seus itens pessoais.',
    longDescription: 'Nossa necessaire em croch√™ √© uma pe√ßa delicada e funcional para organizar seus itens de maquiagem, cosm√©ticos ou pequenos objetos pessoais. Confeccionada artesanalmente com linhas de alta qualidade e forro imperme√°vel, protege seus pertences com estilo. O tamanho compacto √© perfeito para levar na bolsa ou para viagens, mantendo seus itens essenciais sempre organizados e acess√≠veis. Dispon√≠vel em diversas cores, esta necessaire combina praticidade com o charme do trabalho manual, sendo tamb√©m uma √≥tima op√ß√£o de presente. Cada pe√ßa √© √∫nica, com pequenos detalhes que refletem seu car√°ter artesanal.',
    price: 59.90,
    imageUrl: '/images/necessaire-croche.jpg', // Placeholder
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '20cm x 12cm x 8cm (aproximadamente)' },
      { name: 'Material', value: 'Linha de algod√£o mercerizado' },
      { name: 'Cores Dispon√≠veis', value: 'Rosa, Azul Claro, Verde Menta, Lil√°s, Bege' },
      { name: 'Forro', value: 'Tecido imperme√°vel lav√°vel' },
      { name: 'Fechamento', value: 'Z√≠per' },
      { name: 'Prazo de Produ√ß√£o', value: '5 dias √∫teis' }
    ],
    images: [
      '/images/necessaire-croche-1.jpg',
      '/images/necessaire-croche-2.jpg',
      '/images/necessaire-croche-3.jpg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria e sab√£o neutro. N√£o torcer. Secar √† sombra em superf√≠cie plana.'
  },
  {
    id: 'porta-moedas-croche',
    title: 'Porta-moedas em Croch√™',
    description: 'Pequeno porta-moedas em croch√™, pr√°tico e elegante.',
    longDescription: 'Nosso porta-moedas em croch√™ √© uma pe√ßa pequena e charmosa, perfeita para guardar moedas, cart√µes ou pequenos objetos. Confeccionado artesanalmente com linhas de alta qualidade e forro interno, combina praticidade com o charme do trabalho manual. Seu tamanho compacto permite que seja facilmente carregado no bolso ou dentro de outra bolsa, mantendo seus pequenos itens organizados e acess√≠veis. Dispon√≠vel em diversas cores, este porta-moedas √© tamb√©m uma √≥tima op√ß√£o de lembrancinha ou presente para ocasi√µes especiais. Cada pe√ßa possui acabamento cuidadoso e detalhes √∫nicos que s√≥ o trabalho artesanal proporciona.',
    price: 39.90,
    imageUrl: '/images/porta-moedas-croche.jpg', // Placeholder
    category: 'croche',
    specifications: [
      { name: 'Dimens√µes', value: '10cm x 8cm (aproximadamente)' },
      { name: 'Material', value: 'Linha de algod√£o mercerizado fina' },
      { name: 'Cores Dispon√≠veis', value: 'Rosa, Azul, Verde, Amarelo, Vermelho, Preto' },
      { name: 'Forro', value: 'Tecido 100% algod√£o' },
      { name: 'Fechamento', value: 'Bot√£o de press√£o' },
      { name: 'Prazo de Produ√ß√£o', value: '3 dias √∫teis' }
    ],
    images: [
      '/images/porta-moedas-croche-1.jpg',
      '/images/porta-moedas-croche-2.jpg',
      '/images/porta-moedas-croche-3.jpg'
    ],
    careInstructions: 'Lavar √† m√£o com √°gua fria e sab√£o neutro. N√£o torcer. Secar √† sombra em superf√≠cie plana.'
  }
];

// Encontrar o produto com base no ID da URL
const product = crocheProducts.find(p => p.id === id);

// Se o produto n√£o for encontrado, redirecionar para a p√°gina de croch√™
if (!product) {
  return Astro.redirect('/croche');
}

// Formatar o pre√ßo para o formato brasileiro (R$ 0,00)
const formattedPrice = new Intl.NumberFormat('pt-BR', {
  style: 'currency',
  currency: 'BRL'
}).format(product.price);
---

<Layout title={`${product.title} | Maarte Ateli√™`} description={product.description}>
  <Navbar />
  
  <!-- Breadcrumb -->
  <div class="bg-gray-100 py-2">
    <div class="container mx-auto px-4">
      <nav class="flex text-sm">
        <a href="/" class="text-gray-500 hover:text-primary">In√≠cio</a>
        <span class="mx-2 text-gray-500">/</span>
        <a href="/croche" class="text-gray-500 hover:text-primary">Croch√™</a>
        <span class="mx-2 text-gray-500">/</span>
        <span class="text-primary font-medium">{product.title}</span>
      </nav>
    </div>
  </div>
  
  <!-- Product Details -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="flex flex-col lg:flex-row gap-12">
        <!-- Product Images -->
        <div class="lg:w-1/2">
          <div class="bg-gray-100 rounded-lg overflow-hidden mb-4">
            <!-- Imagem principal (placeholder) -->
            <div class="aspect-square bg-rose-100 flex items-center justify-center">
              <span class="text-8xl">üß∂</span>
            </div>
          </div>
          
          <!-- Thumbnails -->
          <div class="grid grid-cols-3 gap-2">
            {product.images.map((image, index) => (
              <div class="aspect-square bg-gray-100 rounded cursor-pointer hover:opacity-80 transition-opacity">
                <!-- Placeholder para miniaturas -->
                <div class="w-full h-full bg-rose-50 flex items-center justify-center">
                  <span class="text-2xl">{index + 1}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
        
        <!-- Product Info -->
        <div class="lg:w-1/2">
          <h1 class="text-3xl font-bold mb-2">{product.title}</h1>
          <p class="text-2xl text-primary font-bold mb-4">{formattedPrice}</p>
          <div class="mb-6">
            <p class="text-gray-700">{product.longDescription}</p>
          </div>
          
          <!-- Specifications -->
          <div class="mb-6">
            <h3 class="text-lg font-bold mb-3">Especifica√ß√µes:</h3>
            <div class="space-y-2">
              {product.specifications.map(spec => (
                <div class="flex flex-col sm:flex-row">
                  <span class="font-medium w-40">{spec.name}:</span>
                  <span class="text-gray-700">{spec.value}</span>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Care Instructions -->
          <div class="mb-8">
            <h3 class="text-lg font-bold mb-2">Instru√ß√µes de Cuidado:</h3>
            <p class="text-gray-700">{product.careInstructions}</p>
          </div>
          
          <!-- WhatsApp Button -->
          <div>
            <WhatsAppButton 
              phoneNumber="5511999999999" 
              message={`Ol√°! Gostaria de saber mais sobre o produto ${product.title} do Maarte Ateli√™.`} 
              className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg w-full sm:w-auto flex items-center justify-center"
            />
            <p class="text-sm text-gray-500 mt-2">Entre em contato para mais informa√ß√µes e encomendas.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Related Products -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-2xl font-bold mb-8">Voc√™ tamb√©m pode gostar</h2>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {crocheProducts
          .filter(p => p.id !== product.id)
          .slice(0, 4)
          .map(relatedProduct => (
            <a href={`/croche/${relatedProduct.id}`} class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
              <div class="aspect-square bg-rose-100 flex items-center justify-center">
                <!-- Placeholder para imagem -->
                <span class="text-4xl">üß∂</span>
              </div>
              <div class="p-4">
                <h3 class="font-bold">{relatedProduct.title}</h3>
                <p class="text-primary font-medium mt-1">
                  {new Intl.NumberFormat('pt-BR', {
                    style: 'currency',
                    currency: 'BRL'
                  }).format(relatedProduct.price)}
                </p>
              </div>
            </a>
          ))}
      </div>
    </div>
  </section>
  
  <Footer />
</Layout>

<style>
  /* Adicione estilos espec√≠ficos da p√°gina aqui, se necess√°rio */
</style>

<script>
  // Script para manipula√ß√£o de imagens (trocar imagem principal ao clicar nas miniaturas)
  document.addEventListener('DOMContentLoaded', () => {
    const thumbnails = document.querySelectorAll('.thumbnails img');
    const mainImage = document.querySelector('.main-image img');
    
    if (thumbnails.length > 0 && mainImage) {
      thumbnails.forEach(thumb => {
        thumb.addEventListener('click', () => {
          mainImage.src = thumb.src;
        });
      });
    }
  });
</script>