---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';
import WhatsAppButton from '../../components/WhatsAppButton.astro';
import { Image } from 'astro:assets';

// Obter o par√¢metro id da URL
const { id } = Astro.params;

// Dados dos produtos personalizados
const personalizadosProducts = [
  {
    id: 'kit-festa',
    title: 'Kit Festa',
    description: 'Kit completo para festas com itens personalizados para decora√ß√£o e lembrancinhas.',
    longDescription: 'Nosso Kit Festa inclui todos os itens essenciais para tornar sua celebra√ß√£o inesquec√≠vel. Cada kit √© cuidadosamente montado e personalizado de acordo com o tema escolhido, garantindo uma decora√ß√£o harmoniosa e √∫nica. O kit inclui toppers para doces, caixinhas para lembrancinhas, bandeirolas decorativas, plaquinhas para mesa, e muito mais. Todos os itens s√£o feitos com materiais de qualidade e podem ser personalizados com cores, temas e nomes √† sua escolha.',
    price: 150.00,
    imageUrl: '/images/kit-festa.svg', // Placeholder SVG
    category: 'personalizados',
    specifications: [
      { name: 'Itens Inclusos', value: '20 toppers para doces, 15 caixinhas para lembrancinhas, 1 bandeirola decorativa, 5 plaquinhas para mesa' },
      { name: 'Personaliza√ß√£o', value: 'Nome, idade, tema e cores' },
      { name: 'Material', value: 'Papel fotogr√°fico, papel color plus, palitos de madeira' },
      { name: 'Prazo de Produ√ß√£o', value: '7 dias √∫teis' }
    ],
    images: [
      '/images/kit-festa.svg',
      '/images/kit-festa.svg',
      '/images/kit-festa.svg'
    ]
  },
  {
    id: 'kit-festa-luxo',
    title: 'Kit Festa Luxo',
    description: 'Kit festa com acabamentos premium e itens adicionais para uma decora√ß√£o sofisticada.',
    longDescription: 'O Kit Festa Luxo √© a op√ß√£o perfeita para quem busca uma decora√ß√£o mais sofisticada e completa. Al√©m dos itens do kit b√°sico, inclu√≠mos elementos premium como caixas personalizadas maiores, displays de mesa, pain√©is decorativos e itens com acabamento especial. Cada detalhe √© pensado para criar um ambiente elegante e harmonioso, com materiais de alta qualidade e acabamento impec√°vel. Personalize cada elemento de acordo com o tema da sua festa para uma experi√™ncia verdadeiramente √∫nica.',
    price: 250.00,
    imageUrl: '/images/kit-festa.svg', // Placeholder SVG
    category: 'personalizados',
    specifications: [
      { name: 'Itens Inclusos', value: '30 toppers para doces, 20 caixinhas para lembrancinhas, 1 bandeirola decorativa premium, 8 plaquinhas para mesa, 3 displays de mesa, 1 painel decorativo pequeno' },
      { name: 'Personaliza√ß√£o', value: 'Nome, idade, tema, cores e elementos decorativos adicionais' },
      { name: 'Material', value: 'Papel fotogr√°fico premium, papel color plus, papel metalizado, palitos de madeira, MDF' },
      { name: 'Prazo de Produ√ß√£o', value: '10 dias √∫teis' }
    ],
    images: [
      '/images/kit-festa.svg',
      '/images/kit-festa.svg',
      '/images/kit-festa.svg'
    ]
  },
  {
    id: 'kit-festa-premium',
    title: 'Kit Festa Premium',
    description: 'Nossa op√ß√£o mais completa de kit festa com itens exclusivos e personaliza√ß√µes especiais.',
    longDescription: 'O Kit Festa Premium √© nossa op√ß√£o mais completa e exclusiva para decora√ß√£o de festas. Este kit inclui todos os itens dos kits anteriores, al√©m de elementos especiais como painel backdrop personalizado, caixas premium para presentes, convites personalizados e itens decorativos exclusivos. Cada elemento √© cuidadosamente elaborado com os melhores materiais e t√©cnicas de acabamento, garantindo uma decora√ß√£o luxuosa e inesquec√≠vel. O Kit Premium tamb√©m inclui uma consultoria personalizada para ajudar a planejar cada detalhe da decora√ß√£o da sua festa.',
    price: 350.00,
    imageUrl: '/images/kit-festa-premium.jpg', // Placeholder
    category: 'personalizados',
    specifications: [
      { name: 'Itens Inclusos', value: '40 toppers para doces, 25 caixinhas para lembrancinhas, 1 bandeirola decorativa premium, 10 plaquinhas para mesa, 5 displays de mesa, 1 painel backdrop personalizado, 20 convites personalizados, 3 caixas premium para presentes' },
      { name: 'Personaliza√ß√£o', value: 'Nome, idade, tema, cores, elementos decorativos exclusivos e consultoria personalizada' },
      { name: 'Material', value: 'Papel fotogr√°fico premium, papel color plus, papel metalizado, papel texturizado especial, palitos de madeira, MDF, acr√≠lico' },
      { name: 'Prazo de Produ√ß√£o', value: '15 dias √∫teis' }
    ],
    images: [
      '/images/kit-festa-premium-1.jpg',
      '/images/kit-festa-premium-2.jpg',
      '/images/kit-festa-premium-3.jpg'
    ]
  },
  {
    id: 'caixas-personalizadas',
    title: 'Caixas Personalizadas',
    description: 'Caixas decorativas personalizadas para presentes ou lembrancinhas.',
    longDescription: 'Nossas caixas personalizadas s√£o perfeitas para presentes especiais ou como lembrancinhas para seus convidados. Dispon√≠veis em diversos tamanhos e formatos, cada caixa √© cuidadosamente confeccionada e decorada de acordo com o tema escolhido. Voc√™ pode personalizar com nomes, datas, cores e elementos decorativos que combinem com sua ocasi√£o especial. Feitas com materiais de qualidade, nossas caixas s√£o resistentes e possuem acabamento impec√°vel, garantindo que seu presente ou lembrancinha seja entregue de forma elegante e memor√°vel.',
    price: 45.00,
    imageUrl: '/images/caixas-personalizadas.jpg', // Placeholder
    category: 'personalizados',
    specifications: [
      { name: 'Tamanhos Dispon√≠veis', value: 'Pequena (8x8x4cm), M√©dia (12x12x6cm), Grande (15x15x8cm)' },
      { name: 'Personaliza√ß√£o', value: 'Nome, data, tema, cores e elementos decorativos' },
      { name: 'Material', value: 'Papel color plus, papel fotogr√°fico, papel metalizado, fitas decorativas' },
      { name: 'Prazo de Produ√ß√£o', value: '5 dias √∫teis' }
    ],
    images: [
      '/images/caixas-personalizadas-1.jpg',
      '/images/caixas-personalizadas-2.jpg',
      '/images/caixas-personalizadas-3.jpg'
    ]
  },
  {
    id: 'convites-personalizados',
    title: 'Convites Personalizados',
    description: 'Convites feitos sob medida para seu evento com design exclusivo.',
    longDescription: 'Nossos convites personalizados s√£o a primeira impress√£o do seu evento, por isso criamos designs exclusivos que refletem o estilo e tema da sua celebra√ß√£o. Cada convite √© cuidadosamente elaborado com aten√ß√£o aos detalhes, utilizando pap√©is especiais e t√©cnicas de impress√£o de alta qualidade. Oferecemos diversas op√ß√µes de formatos, acabamentos e elementos decorativos, como la√ßos, apliques, glitter e muito mais. Todos os convites incluem envelopes combinando e podem ser personalizados com as informa√ß√µes do seu evento, cores e elementos visuais que tornam seu convite verdadeiramente √∫nico.',
    price: 3.50,
    imageUrl: '/images/convites-personalizados.jpg', // Placeholder
    category: 'personalizados',
    specifications: [
      { name: 'Formatos Dispon√≠veis', value: 'Tradicional (15x10cm), Especial (formatos variados), 3D (com elementos em relevo)' },
      { name: 'Personaliza√ß√£o', value: 'Texto completo do convite, tema, cores, elementos decorativos' },
      { name: 'Material', value: 'Papel color plus, papel metalizado, papel texturizado, papel vegetal, elementos decorativos (la√ßos, apliques, glitter)' },
      { name: 'Prazo de Produ√ß√£o', value: '7 dias √∫teis' }
    ],
    images: [
      '/images/convites-personalizados-1.jpg',
      '/images/convites-personalizados-2.jpg',
      '/images/convites-personalizados-3.jpg'
    ]
  },
  {
    id: 'toppers-personalizados',
    title: 'Toppers Personalizados',
    description: 'Toppers decorativos para bolos e cupcakes com temas variados.',
    longDescription: 'Nossos toppers personalizados s√£o o toque final perfeito para bolos, cupcakes e doces da sua festa. Dispon√≠veis em diversos temas e formatos, cada topper √© cuidadosamente criado para complementar a decora√ß√£o do seu evento. Feitos com materiais de qualidade e impress√£o de alta defini√ß√£o, nossos toppers s√£o resistentes e seguros para uso em alimentos. Voc√™ pode personalizar com nomes, idades, datas e elementos decorativos que combinem com o tema da sua celebra√ß√£o, garantindo uma apresenta√ß√£o √∫nica e especial para os doces da sua festa.',
    price: 25.00,
    imageUrl: '/images/toppers-personalizados.jpg', // Placeholder
    category: 'personalizados',
    specifications: [
      { name: 'Quantidade', value: 'Kit com 20 toppers sortidos' },
      { name: 'Personaliza√ß√£o', value: 'Nome, idade, tema, cores e elementos decorativos' },
      { name: 'Material', value: 'Papel fotogr√°fico, papel color plus, palitos de madeira (aprovados para contato com alimentos)' },
      { name: 'Prazo de Produ√ß√£o', value: '3 dias √∫teis' }
    ],
    images: [
      '/images/toppers-personalizados-1.jpg',
      '/images/toppers-personalizados-2.jpg',
      '/images/toppers-personalizados-3.jpg'
    ]
  }
];

// Encontrar o produto com base no ID da URL
const product = personalizadosProducts.find(p => p.id === id);

// Se o produto n√£o for encontrado, redirecionar para a p√°gina de personalizados
if (!product) {
  return Astro.redirect('/personalizados');
}

// Formatar o pre√ßo para o formato brasileiro (R$ 0,00)
const formattedPrice = new Intl.NumberFormat('pt-BR', {
  style: 'currency',
  currency: 'BRL'
}).format(product.price);
---

<Layout title={`${product.title} | Maarte Ateli√™`} description={product.description}>
  <Navbar />
  
  <!-- Breadcrumb -->
  <div class="bg-gray-100 py-2">
    <div class="container mx-auto px-4">
      <nav class="flex text-sm">
        <a href="/" class="text-gray-500 hover:text-primary">In√≠cio</a>
        <span class="mx-2 text-gray-500">/</span>
        <a href="/personalizados" class="text-gray-500 hover:text-primary">Personalizados</a>
        <span class="mx-2 text-gray-500">/</span>
        <span class="text-primary font-medium">{product.title}</span>
      </nav>
    </div>
  </div>
  
  <!-- Product Details -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="flex flex-col lg:flex-row gap-12">
        <!-- Product Images -->
        <div class="lg:w-1/2">
          <div class="bg-gray-100 rounded-lg overflow-hidden mb-4">
            <!-- Imagem principal (placeholder) -->
            <div class="aspect-square bg-pink-100 flex items-center justify-center">
              <span class="text-8xl">{product.id.includes('kit') ? 'üéÅ' : 'üì¶'}</span>
            </div>
          </div>
          
          <!-- Thumbnails -->
          <div class="grid grid-cols-3 gap-2">
            {product.images.map((image, index) => (
              <div class="aspect-square bg-gray-100 rounded cursor-pointer hover:opacity-80 transition-opacity">
                <!-- Placeholder para miniaturas -->
                <div class="w-full h-full bg-pink-50 flex items-center justify-center">
                  <span class="text-2xl">{index + 1}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
        
        <!-- Product Info -->
        <div class="lg:w-1/2">
          <h1 class="text-3xl font-bold mb-2">{product.title}</h1>
          <p class="text-2xl text-primary font-bold mb-4">{formattedPrice}</p>
          <div class="mb-6">
            <p class="text-gray-700">{product.longDescription}</p>
          </div>
          
          <!-- Specifications -->
          <div class="mb-8">
            <h3 class="text-lg font-bold mb-3">Especifica√ß√µes:</h3>
            <div class="space-y-2">
              {product.specifications.map(spec => (
                <div class="flex flex-col sm:flex-row">
                  <span class="font-medium w-40">{spec.name}:</span>
                  <span class="text-gray-700">{spec.value}</span>
                </div>
              ))}
            </div>
          </div>
          
          <!-- WhatsApp Button -->
          <div>
            <WhatsAppButton 
              phoneNumber="5511999999999" 
              message={`Ol√°! Gostaria de saber mais sobre o produto ${product.title} do Maarte Ateli√™.`} 
              className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg w-full sm:w-auto flex items-center justify-center"
            />
            <p class="text-sm text-gray-500 mt-2">Entre em contato para mais informa√ß√µes e encomendas.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Related Products -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-2xl font-bold mb-8">Voc√™ tamb√©m pode gostar</h2>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {personalizadosProducts
          .filter(p => p.id !== product.id)
          .slice(0, 4)
          .map(relatedProduct => (
            <a href={`/personalizados/${relatedProduct.id}`} class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
              <div class="aspect-square bg-pink-100 flex items-center justify-center">
                <!-- Placeholder para imagem -->
                <span class="text-4xl">{relatedProduct.id.includes('kit') ? 'üéÅ' : 'üì¶'}</span>
              </div>
              <div class="p-4">
                <h3 class="font-bold">{relatedProduct.title}</h3>
                <p class="text-primary font-medium mt-1">
                  {new Intl.NumberFormat('pt-BR', {
                    style: 'currency',
                    currency: 'BRL'
                  }).format(relatedProduct.price)}
                </p>
              </div>
            </a>
          ))}
      </div>
    </div>
  </section>
  
  <Footer />
</Layout>

<style>
  /* Adicione estilos espec√≠ficos da p√°gina aqui, se necess√°rio */
</style>

<script>
  // Script para manipula√ß√£o de imagens (trocar imagem principal ao clicar nas miniaturas)
  document.addEventListener('DOMContentLoaded', () => {
    const thumbnails = document.querySelectorAll('.thumbnails img');
    const mainImage = document.querySelector('.main-image img');
    
    if (thumbnails.length > 0 && mainImage) {
      thumbnails.forEach(thumb => {
        thumb.addEventListener('click', () => {
          mainImage.src = thumb.src;
        });
      });
    }
  });
</script>